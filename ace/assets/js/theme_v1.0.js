/*! For license information please see theme_v1.0.js.LICENSE.txt */
(()=>{"use strict";(()=>{const e=window,t=document,r=t.documentElement||t.body,a=e=>typeof e,s=e=>Object.prototype.toString.call(e),o=null,n="",c=a(n),m=s([]),l=e=>a(e)===c,i=Array.isArray||(e=>s(e)===m),d=e=>{throw"Fail to "+e},h=(e,t,r,a)=>{e.addEventListener(t,r,a)},g=(e,t)=>new RegExp(e,t),u=(e,t,r)=>{try{const a=" ",s="|",o="g",c=g("[\\.\\|\\s]+",o),m=(e,t=s)=>e.trim().replace(c,t).trim(),l=r?m(r,a):n,i=t?m([t,l].join(a)).trim():n,d=g("(^|\\s+)("+i+")(\\s*("+i+"))*(\\s+|$)",o),h=e.className.replace(d,a).trim()+(l.length?a+l:n);return e.className=h,e}catch(e){d("updateClass")}},p=(e,t,r)=>{e.setAttribute(t,r)},v=(()=>{const{localStorage:t}=e,r=e=>{e?t.removeItem(e):d("remove "+e)};return{set:(e,a)=>{e?l(a)?t.setItem(e,a):r(e):d("set "+e)},get:e=>e?t.getItem(e):(d("get "+e),o),remove:r}})();(()=>{const a="theme",s="themes",c="_dark",m="color-scheme",d=(N=(()=>{var e=t.getElementById("_color_scheme");if(!e){var r=t.getElementsByName(m);i(r)&&(e=r[r.length-1])}if(!e){e=t.createElement("meta");var a=[["name",m]];for(var s in a)p(e,a[s][0],a[s][1]);t.head&&t.head.appendChild(e)}return e})(),{set:e=>{N&&p(N,"content",e)}}),g=(e,t)=>{var o=C||n;i(e)&&(x=e,v.set(s,JSON.stringify(x)),e=x[l(t)?x.indexOf(t||n):0]),C=l(e)&&e||n,u(r,o,C),E(C),v.set(a,C)},y=()=>{g(x[x.indexOf(C||n)+1]||n)},f=()=>{x=[c];var e=C||n;C=O.matches?c:n,u(r,e,C),E(C),v.remove(a),v.remove(s)},E=e=>{e&&"_d"===e.substring(0,2)?d.set("dark"):d.set("light")},O=e.matchMedia("(prefers-color-scheme: dark)"),b=e.themejsCode;var N;if(b&&b.indexOf(btoa(e.location.hostname))>=0){var k=(e=>{try{return e&&JSON.parse(e)}catch(t){console.error("Fail to parse stored themes: "+e)}return o})(v.get(s)),w=v.get(a),x=k||[c],C=l(w)?w:O.matches?c:n;u(r,o,C),E(C),h(O,"change",(e=>{e.matches?g(c):g()})),h(e,"keyup",(e=>{e.altKey&&"KeyT"===e.code&&y()})),e.theme={reset:f,set:g,change:y,list:()=>x,current:()=>C,fn:{updateClass:u,storage:v}}}})()})()})();